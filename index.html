<!DOCTYPE html>
<html>
<head>
    <title>Blue Lakes Mapping</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: #ffffff;
        }
        #container {
            padding: 10px;
            background-color: #ffffff;
            display: inline-block;
        }
        h1 {
            margin: 0;
        }
        #logo {
            display: block;
            margin: 0 auto;
            width: 25%;
        }
        #map {
            height: 400px;
            margin: 10px auto;
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>Blue Lakes Mapping</h1>
        <img id="logo" src="https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Blue_Lakes_Logo.png" alt="Blue Lakes Logo">
        <div id="map"></div>
    </div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet-ajax@2.1.0/dist/leaflet.ajax.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var map = L.map('map').setView([0, 0], 10);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

            function onEachFeature(feature, layer) {
                if (feature.properties) {
                    var popupContent = "<h3>Feature Attributes</h3>";
                    for (var property in feature.properties) {
                        if (feature.properties.hasOwnProperty(property)) {
                            popupContent += "<strong>" + property + ":</strong> " + feature.properties[property] + "<br>";
                        }
                    }

                    var encodedLakeName = encodeURIComponent(feature.properties.OFFICIAL_NAME_LABEL);

                    // JPG folders for DO, Phosphorus, and Temperature
                    var jpgFolders = [
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/DO_1/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/DO_2/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_1/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_2/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_3/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_4/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_5/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_6/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_7/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Phosphorus_8/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Temperature_1/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Temperature_2/",
                        "https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Temperature_3/"
                    ];

                    // Check for existing files in the JPG folders
                    var links = [];
                    var linkNames = ["DO Graph", "DO Graph", "Phosphorus Graph", "Phosphorus Graph", "Phosphorus Graph", "Phosphorus Graph", "Phosphorus Graph", "Phosphorus Graph", "Phosphorus Graph", "Phosphorus Graph", "Temperature Graph", "Temperature Graph", "Temperature Graph"];
                    for (var i = 0; i < jpgFolders.length; i++) {
                        var fileType = i < 10 ? "dissolved_oxygen" : (i < 20 ? "phosphorus" : "temperature");
                        var link = jpgFolders[i] + encodedLakeName + "_" + fileType + "_graph.jpg";
                        var request = new XMLHttpRequest();
                        request.open('HEAD', link, false);
                        request.send();

                        if (request.status !== 404) {
                            // File exists in the current folder
                            links.push('<a href="' + link + '" target="_blank">' + linkNames[i] + '</a>');
                        }
                    }

                    popupContent += links.join(" ");

                    layer.bindPopup(popupContent);
                }
            }

            var geojsonLayer = new L.GeoJSON.AJAX("https://raw.githubusercontent.com/Benjikemp/Blue_Lakes/main/Blue_Lakes_All.geojson", {
                onEachFeature: onEachFeature,
            });

            geojsonLayer.addTo(map);
        });
    </script>
</body>
</html>















